permissions:
  contents: write  # 允许写入仓库代码
  pull-requests: write  # 允许操作 PR
``` ‌:ml-citation{ref="3,7" data="citationList"}


name: Sync External README
on:
  schedule:
    - cron: '2 * * * *'  # 每天 UTC 时间 0 点运行（可自定义）
  workflow_dispatch:     # 允许手动触发

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: 克隆仓库
        uses: actions/checkout@v4

      - name: 下载他人 README.md
        run: |
          wget -O external-readme.md https://github.com/toshare5/toshare5.github.io/blob/main/README.md

      - name: 提取指定行代码
        run: |
          # 示例：提取第 10 行（行号从 1 开始）
          sed -n '29p' external-readme.md > extracted-line.txt

      - name: 更新自己的 README.md
        run: |
          # 替换标记行（需预先在 README.md 中添加 <!-- AUTO-SYNC-LINE -->）
          sed -i "/<!-- AUTO-SYNC-LINE -->/c $(cat extracted-line.txt)\n<!-- AUTO-SYNC-LINE -->" README.md

      - name: 提交更改
        uses: EndBug/add-and-commit@v9
        with:
          message: "自动同步 README 代码行"
          add: README.md
